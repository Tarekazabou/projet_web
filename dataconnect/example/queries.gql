mutation AddIngredientToFridge($userId: UUID!, $ingredientId: UUID!, $quantity: Float!, $unit: String!, $expirationDate: Date) @auth(level: USER) {
  fridgeItem_insert(data: {
    userId: $userId,
    ingredientId: $ingredientId,
    quantity: $quantity,
    unit: $unit,
    expirationDate: $expirationDate,
    addedAt_expr: "request.time"
  })
}

query GetUserFridge($userId: UUID!) @auth(level: USER) {
  fridgeItems(where: {userId: {eq: $userId}}) {
    ingredient {
      id
      name
      unit
    }
    quantity
    unit
    expirationDate
  }
}

mutation AddMealPlan($userId: UUID!, $recipeId: UUID!, $mealType: String!, $planDate: Date!) @auth(level: USER) {
  mealPlan_insert(data: {
    userId: $userId,
    recipeId: $recipeId,
    mealType: $mealType,
    planDate: $planDate
  })
}

query GetUserMealPlan($userId: UUID!, $planDate: Date!) @auth(level: USER) {
  mealPlans(where: {userId: {eq: $userId}, planDate: {eq: $planDate}}) {
    id
    recipe {
      id
      title
      imageUrl
    }
    mealType
    planDate
  }
}